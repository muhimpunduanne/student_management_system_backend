generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  STUDENT
}

enum StudentStatus {
  ACTIVE
  GRADUATED
  DROPPED
}

model User {
  id               String   @id @default(uuid())
  email            String   @unique
  password         String
  firstName        String?
  lastName         String
  otpCode          String?      
  otpExpiresAt     DateTime?   
  isVerified       Boolean  @default(false) 
  role             Role     @default(STUDENT)
  resetToken       String?           
  resetTokenExpiry DateTime?        
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  student          Student? 
}

model Student {
  id             String         @id @default(uuid())
  userId         String         @unique
  phone          String
  profilePicture String
  course         String
  enrollmentYear Int            @default(2025)
  status         StudentStatus  @default(ACTIVE)

  user           User           @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
}
